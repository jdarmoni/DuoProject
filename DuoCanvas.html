<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="Duo.css">
    <title>Gamedev Canvas Workshop</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
</head>
<body>
    <div class="header"> Duolingo! Translate <span class="word">"Oeuf"</span> </div>

<canvas id="myCanvas" width="960" height="640"></canvas>

<script>
    window.onload = function(){

        var canvas = document.getElementById('myCanvas');
        var ctx = canvas.getContext('2d');
        var sprite = new Image();
            sprite.src = "https://d7mj4aqfscim2.cloudfront.net/images/owl-sprite20.svg";
        
        var sx = 15;
        var sy = 15;
        var sWidth = 250;
        var sHeight = 300;
        var dx = 0;
        var dy = canvas.height - 90;
        var dWidth = 75;
        var dHeight = 100;
        var rightPressed = false;
        var leftPressed = false;
        var upPressed = false;
        var downPressed = false;
        var ticker = 0;

        // PLATFORMS
        var platform = {x: 450, y: canvas.height-200, height: 200, width: 200}
    
        var terrace = {x: 0, y: 100, height: 50, width: 200 }
                    
        // ******* Dark Duos ******/
        var DarkDuo = {sx: 610, sy: 300, dx: canvas.width, dy: canvas.height}
        
        // ******* Dark Duos *****/
        
        sprite.onload = function(){            
            ctx.drawImage(sprite, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);
        }

    function spriteify() {
        if (sx === 15 ) {
            sx = 340;
        } else if (sx === 340 ) {
            sx = 15;
        } 
    }
    function drawPlatform() {
            ctx.beginPath();
            ctx.rect(platform.x, platform.y, platform.width, platform.height);
            ctx.fillStyle = "black";
            ctx.fill();
            ctx.closePath();
        }

    function drawTerrace(){
        ctx.beginPath();
        ctx.rect(terrace.x, terrace.y, terrace.width, terrace.height)
        ctx.fillStyle = "black";
        ctx.fill();
        ctx.closePath();
    }

    // function collisionDetection(object){
    //     if (){

    //     }
    // }

    function draw() {
            ctx.clearRect(dx, dy, dWidth, dHeight);
            drawPlatform();
            drawTerrace();
            // collisionDetection();
        

            // ctx.drawImage(sprite, dDsx, dDsy, sWidth, sHeight, Ddx, Ddy, dWidth, dHeight)

            if (rightPressed && ( dx + dWidth< canvas.width) ) {
                dx += 5;
            }
            if (leftPressed && dx > 0) {
                dx -= 5;
            }
            if (upPressed && dy > 0) {
                dy -= 5;
            }
            if ( (upPressed === false && dy < canvas.height) && (dy + dHeight < canvas.height) ) {
                dy += 5;
            }
            ctx.drawImage(sprite, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);

    }

    document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);

    function keyDownHandler(e) {
        if (e.key == "Right" || e.key == "ArrowRight") {
            rightPressed = true;
        }
        else if (e.key == "Left" || e.key == "ArrowLeft") {
            leftPressed = true;
        } 
        else if (e.key == "Up" || e.key == "ArrowUp") {
            upPressed = true;
        }
        else if (e.key == "Down" || e.key == "ArrowDown") {
            downPressed = true;
        }
    }

    function keyUpHandler(e) {
        if (e.key == "Right" || e.key == "ArrowRight") {
            rightPressed = false;
        }
        else if (e.key == "Left" || e.key == "ArrowLeft") {
            leftPressed = false;
        }
        else if (e.key == "Up" || e.key =="ArrowUp") {
            upPressed = false;
        }
        else if (e.key == "Down" || e.key == "ArrowDown") {
            downPressed = false;
        }
    }

    // function collisionDetection() {
    //         for (var c = 0; c < brickColumnCount; c++) {
    //             for (var r = 0; r < brickRowCount; r++) {
    //                 var b = bricks[c][r];
    //                 if (x > b.x && x < b.x + brickWidth && y > b.y && y < b.y + brickHeight) {
    //                     dy = -dy;
    //                 }
    //             }
    //         }
    //     }
    
    setInterval(draw, 15)
    setInterval(spriteify, 750)
}

</script>

</body>
</html>